import exposesMap,{__tla as __tla_0}from"./virtualExposes-BOht1keI.js";let getExposes,init,__tla=Promise.all([(()=>{try{return __tla_0}catch{}})()]).then(async()=>{var index_cjs$2={},polyfills_cjs$1={};function _extends$2(){return _extends$2=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},_extends$2.apply(this,arguments)}function _object_without_properties_loose(e,r){if(e==null)return{};var a={},t=Object.keys(e),i,d;for(d=0;d<t.length;d++)i=t[d],!(r.indexOf(i)>=0)&&(a[i]=e[i]);return a}polyfills_cjs$1._extends=_extends$2,polyfills_cjs$1._object_without_properties_loose=_object_without_properties_loose;var index_cjs$1={},__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(e,r)=>{for(var a in r)__defProp(e,a,{get:r[a],enumerable:!0})},__copyProps=(e,r,a,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of __getOwnPropNames(r))!__hasOwnProp.call(e,i)&&i!==a&&__defProp(e,i,{get:()=>r[i],enumerable:!(t=__getOwnPropDesc(r,i))||t.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),browser_exports={};__export(browser_exports,{createLogger:()=>createLogger2,logger:()=>logger$2});var browser=__toCommonJS(browser_exports),supportsSubstitutions=void 0,supportColor=()=>{if(typeof supportsSubstitutions<"u")return supportsSubstitutions;try{const e="color test",r="color: red;",a=console.log;console.log=(...t)=>{t[0]===`%c${e}`&&t[1]===r&&(supportsSubstitutions=!0)},console.log(`%c${e}`,r),console.log=a}catch{supportsSubstitutions=!1}return supportsSubstitutions},ansiToCss={bold:"font-weight: bold;",red:"color: red;",green:"color: green;",orange:"color: orange;",dodgerblue:"color: dodgerblue;",magenta:"color: magenta;",gray:"color: gray;"},formatter=e=>supportColor()?r=>{if(Array.isArray(r)){const[a,t]=r;return[`%c${a.replace("%c","")}`,t?`${ansiToCss[e]}${t}`:`${ansiToCss[e]||""}`]}return[`%c${String(r).replace("%c","")}`,ansiToCss[e]||""]}:r=>[String(r)],bold=formatter("bold"),red=formatter("red"),green=formatter("green"),orange=formatter("orange"),dodgerblue=formatter("dodgerblue"),magenta=formatter("magenta");formatter("gray");function getLabel(e,r,a){let t=[""];return"label"in r&&(t=[a[e]||r.label||""],t=bold(r.color?r.color(t):t[0])),t=t.filter(Boolean),t}function finalLog(e,r,a,t){e.length?Array.isArray(t)?console.log(...e,...t):console.log(...e,r):Array.isArray(t)?console.log(...t):console.log(r,...a)}var LOG_LEVEL={error:0,warn:1,info:2,log:3,verbose:4},errorStackRegExp=/at\s.*:\d+:\d+[\s\)]*$/,anonymousErrorStackRegExp=/at\s.*\(<anonymous>\)$/,isErrorStackMessage=e=>errorStackRegExp.test(e)||anonymousErrorStackRegExp.test(e),createLogger$1=(e={},{getLabel:r,handleError:a,finalLog:t,greet:i,LOG_TYPES:d})=>{let _=e.level||"log",h=e.labels||{},g=(S,v,...j)=>{if(LOG_LEVEL[d[S].level]>LOG_LEVEL[_])return;if(v==null)return console.log();let k=d[S],C="";const V=r(S,k,h);if(v instanceof Error)if(v.stack){let[A,...B]=v.stack.split(`
`);A.startsWith("Error: ")&&(A=A.slice(7)),C=`${A}
${a(B.join(`
`))}`}else C=v.message;else k.level==="error"&&typeof v=="string"?C=v.split(`
`).map(A=>isErrorStackMessage(A)?a(A):A).join(`
`):C=`${v}`;t(V,C,j,v)},b={greet:S=>g("log",i(S))};return Object.keys(d).forEach(S=>{b[S]=(...v)=>g(S,...v)}),Object.defineProperty(b,"level",{get:()=>_,set(S){_=S}}),Object.defineProperty(b,"labels",{get:()=>h,set(S){h=S}}),b.override=S=>{Object.assign(b,S)},b},startColor=[189,255,243],endColor=[74,194,154],isWord=e=>!/[\s\n]/.test(e);function gradient(e){if(!supportColor())return[e];const r=[...e],a=r.filter(isWord),t=a.length-1;if(t===0)return console.log(`%c${e}`,`color: rgb(${startColor.join(",")}); font-weight: bold;`),[e];let i="",d=[];return r.forEach(_=>{if(isWord(_)){const h=a.indexOf(_)/t,g=Math.round(startColor[0]+(endColor[0]-startColor[0])*h),b=Math.round(startColor[1]+(endColor[1]-startColor[1])*h),S=Math.round(startColor[2]+(endColor[2]-startColor[2])*h);i+=`%c${_}`,d.push(`color: rgb(${g},${b},${S}); font-weight: bold;`)}else i+=_}),[i,...d]}var LOG_TYPES={error:{label:"error",level:"error",color:red},warn:{label:"warn",level:"warn",color:orange},info:{label:"info",level:"info",color:dodgerblue},start:{label:"start",level:"info",color:dodgerblue},ready:{label:"ready",level:"info",color:green},success:{label:"success",level:"info",color:green},log:{level:"log"},debug:{label:"debug",level:"verbose",color:magenta}};function createLogger2(e={}){return createLogger$1(e,{handleError:r=>r,getLabel,finalLog,LOG_TYPES,greet:r=>gradient(r)})}var logger$2=createLogger2(),polyfills_cjs={};function _extends$1(){return _extends$1=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},_extends$1.apply(this,arguments)}polyfills_cjs._extends=_extends$1;var isomorphicRslog=browser,polyfills$1=polyfills_cjs;const FederationModuleManifest="federation-manifest.json",MANIFEST_EXT=".json",BROWSER_LOG_KEY="FEDERATION_DEBUG",BROWSER_LOG_VALUE="1",NameTransformSymbol={AT:"@",HYPHEN:"-",SLASH:"/"},NameTransformMap={[NameTransformSymbol.AT]:"scope_",[NameTransformSymbol.HYPHEN]:"_",[NameTransformSymbol.SLASH]:"__"},EncodedNameTransformMap={[NameTransformMap[NameTransformSymbol.AT]]:NameTransformSymbol.AT,[NameTransformMap[NameTransformSymbol.HYPHEN]]:NameTransformSymbol.HYPHEN,[NameTransformMap[NameTransformSymbol.SLASH]]:NameTransformSymbol.SLASH},SEPARATOR=":",ManifestFileName="mf-manifest.json",StatsFileName="mf-stats.json",MFModuleType={NPM:"npm",APP:"app"},MODULE_DEVTOOL_IDENTIFIER="__MF_DEVTOOLS_MODULE_INFO__",ENCODE_NAME_PREFIX="ENCODE_NAME_PREFIX",TEMP_DIR=".federation",MFPrefetchCommon={identifier:"MFDataPrefetch",globalKey:"__PREFETCH__",library:"mf-data-prefetch",exportsKey:"__PREFETCH_EXPORTS__",fileName:"bootstrap.js"};var ContainerPlugin=Object.freeze({__proto__:null}),ContainerReferencePlugin=Object.freeze({__proto__:null}),ModuleFederationPlugin=Object.freeze({__proto__:null}),SharePlugin=Object.freeze({__proto__:null});function isBrowserEnv(){return typeof window<"u"}function isBrowserDebug(){try{if(isBrowserEnv()&&window.localStorage)return localStorage.getItem(BROWSER_LOG_KEY)===BROWSER_LOG_VALUE}catch{return!1}return!1}function isDebugMode(){return typeof process<"u"&&process.env&&process.env.FEDERATION_DEBUG?!!process.env.FEDERATION_DEBUG:typeof FEDERATION_DEBUG<"u"&&FEDERATION_DEBUG?!0:isBrowserDebug()}const getProcessEnv=function(){return typeof process<"u"&&process.env?process.env:{}},PREFIX="[ Module Federation ]";function setDebug(e){isDebugMode()&&(e.level="verbose")}function setPrefix(e,r){e.labels={warn:`${r} Warn`,error:`${r} Error`,success:`${r} Success`,info:`${r} Info`,ready:`${r} Ready`,debug:`${r} Debug`}}function createLogger(e){const r=isomorphicRslog.createLogger({labels:{warn:`${PREFIX} Warn`,error:`${PREFIX} Error`,success:`${PREFIX} Success`,info:`${PREFIX} Info`,ready:`${PREFIX} Ready`,debug:`${PREFIX} Debug`}});return setDebug(r),setPrefix(r,e),r}const logger$1=createLogger(PREFIX),LOG_CATEGORY$1="[ Federation Runtime ]",parseEntry=(e,r,a=SEPARATOR)=>{const t=e.split(a),i=getProcessEnv().NODE_ENV==="development"&&r,d="*",_=h=>h.startsWith("http")||h.includes(MANIFEST_EXT);if(t.length>=2){let[h,...g]=t;e.startsWith(a)&&(g=[i||t.slice(-1)[0]],h=t.slice(0,-1).join(a));let b=i||g.join(a);return _(b)?{name:h,entry:b}:{name:h,version:b||d}}else if(t.length===1){const[h]=t;return i&&_(i)?{name:h,entry:i}:{name:h,version:i||d}}else throw`Invalid entry value: ${e}`},composeKeyWithSeparator=function(...e){return e.length?e.reduce((r,a)=>a?r?`${r}${SEPARATOR}${a}`:a:r,""):""},encodeName=function(e,r="",a=!1){try{const t=a?".js":"";return`${r}${e.replace(new RegExp(`${NameTransformSymbol.AT}`,"g"),NameTransformMap[NameTransformSymbol.AT]).replace(new RegExp(`${NameTransformSymbol.HYPHEN}`,"g"),NameTransformMap[NameTransformSymbol.HYPHEN]).replace(new RegExp(`${NameTransformSymbol.SLASH}`,"g"),NameTransformMap[NameTransformSymbol.SLASH])}${t}`}catch(t){throw t}},decodeName=function(e,r,a){try{let t=e;if(r){if(!t.startsWith(r))return t;t=t.replace(new RegExp(r,"g"),"")}return t=t.replace(new RegExp(`${NameTransformMap[NameTransformSymbol.AT]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.AT]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.SLASH]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.SLASH]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.HYPHEN]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.HYPHEN]]),a&&(t=t.replace(".js","")),t}catch(t){throw t}},generateExposeFilename=(e,r)=>{if(!e)return"";let a=e;return a==="."&&(a="default_export"),a.startsWith("./")&&(a=a.replace("./","")),encodeName(a,"__federation_expose_",r)},generateShareFilename=(e,r)=>e?encodeName(e,"__federation_shared_",r):"",getResourceUrl=(e,r)=>{if("getPublicPath"in e){let a;return e.getPublicPath.startsWith("function")?a=new Function("return "+e.getPublicPath)()():a=new Function(e.getPublicPath)(),`${a}${r}`}else return"publicPath"in e?`${e.publicPath}${r}`:(console.warn("Cannot get resource URL. If in debug mode, please ignore.",e,r),"")},assert$1=(e,r)=>{e||error$1(r)},error$1=e=>{throw new Error(`${LOG_CATEGORY$1}: ${e}`)},warn$1=e=>{console.warn(`${LOG_CATEGORY$1}: ${e}`)};function safeToString(e){try{return JSON.stringify(e,null,2)}catch{return""}}const VERSION_PATTERN_REGEXP=/^([\d^=v<>~]|[*xX]$)/;function isRequiredVersion(e){return VERSION_PATTERN_REGEXP.test(e)}const simpleJoinRemoteEntry=(e,r)=>{if(!e)return r;const a=(t=>{if(t===".")return"";if(t.startsWith("./"))return t.replace("./","");if(t.startsWith("/")){const i=t.slice(1);return i.endsWith("/")?i.slice(0,-1):i}return t})(e);return a?a.endsWith("/")?`${a}${r}`:`${a}/${r}`:r};function inferAutoPublicPath(e){return e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")}function generateSnapshotFromManifest(e,r={}){var a,t;const{remotes:i={},overrides:d={},version:_}=r;let h;const g=()=>"publicPath"in e.metaData?e.metaData.publicPath==="auto"&&_?inferAutoPublicPath(_):e.metaData.publicPath:e.metaData.getPublicPath,b=Object.keys(d);let S={};if(!Object.keys(i).length){var v;S=((v=e.remotes)==null?void 0:v.reduce((M,Y)=>{let z;const Z=Y.federationContainerName;return b.includes(Z)?z=d[Z]:"version"in Y?z=Y.version:z=Y.entry,M[Z]={matchedVersion:z},M},{}))||{}}Object.keys(i).forEach(M=>S[M]={matchedVersion:b.includes(M)?d[M]:i[M]});const{remoteEntry:{path:j,name:k,type:C},types:V,buildInfo:{buildVersion:A},globalName:B,ssrRemoteEntry:U}=e.metaData,{exposes:J}=e;let X={version:_||"",buildVersion:A,globalName:B,remoteEntry:simpleJoinRemoteEntry(j,k),remoteEntryType:C,remoteTypes:simpleJoinRemoteEntry(V.path,V.name),remoteTypesZip:V.zip||"",remoteTypesAPI:V.api||"",remotesInfo:S,shared:e==null?void 0:e.shared.map(M=>({assets:M.assets,sharedName:M.name,version:M.version})),modules:J==null?void 0:J.map(M=>({moduleName:M.name,modulePath:M.path,assets:M.assets}))};if((a=e.metaData)!=null&&a.prefetchInterface){const M=e.metaData.prefetchInterface;X=polyfills$1._extends({},X,{prefetchInterface:M})}if((t=e.metaData)!=null&&t.prefetchEntry){const{path:M,name:Y,type:z}=e.metaData.prefetchEntry;X=polyfills$1._extends({},X,{prefetchEntry:simpleJoinRemoteEntry(M,Y),prefetchEntryType:z})}if("publicPath"in e.metaData?h=polyfills$1._extends({},X,{publicPath:g()}):h=polyfills$1._extends({},X,{getPublicPath:g()}),U){const M=simpleJoinRemoteEntry(U.path,U.name);h.ssrRemoteEntry=M,h.ssrRemoteEntryType=U.type||"commonjs-module"}return h}function isManifestProvider(e){return!!("remoteEntry"in e&&e.remoteEntry.includes(MANIFEST_EXT))}async function safeWrapper(e,r){try{return await e()}catch(a){!r&&warn$1(a);return}}function isStaticResourcesEqual(e,r){const a=/^(https?:)?\/\//i,t=e.replace(a,"").replace(/\/$/,""),i=r.replace(a,"").replace(/\/$/,"");return t===i}function createScript(e){let r=null,a=!0,t=2e4,i;const d=document.getElementsByTagName("script");for(let h=0;h<d.length;h++){const g=d[h],b=g.getAttribute("src");if(b&&isStaticResourcesEqual(b,e.url)){r=g,a=!1;break}}if(!r){const h=e.attrs;r=document.createElement("script"),r.type=(h==null?void 0:h.type)==="module"?"module":"text/javascript";let g;e.createScriptHook&&(g=e.createScriptHook(e.url,e.attrs),g instanceof HTMLScriptElement?r=g:typeof g=="object"&&("script"in g&&g.script&&(r=g.script),"timeout"in g&&g.timeout&&(t=g.timeout))),r.src||(r.src=e.url),h&&!g&&Object.keys(h).forEach(b=>{r&&(b==="async"||b==="defer"?r[b]=h[b]:r.getAttribute(b)||r.setAttribute(b,h[b]))})}const _=async(h,g)=>{var b;if(clearTimeout(i),r&&(r.onerror=null,r.onload=null,safeWrapper(()=>{const{needDeleteScript:j=!0}=e;j&&(r!=null&&r.parentNode)&&r.parentNode.removeChild(r)}),h&&typeof h=="function")){var S;const j=h(g);if(j instanceof Promise){var v;const k=await j;return e==null||(v=e.cb)==null||v.call(e),k}return e==null||(S=e.cb)==null||S.call(e),j}e==null||(b=e.cb)==null||b.call(e)};return r.onerror=_.bind(null,r.onerror),r.onload=_.bind(null,r.onload),i=setTimeout(()=>{_(null,new Error(`Remote script "${e.url}" time-outed.`))},t),{script:r,needAttach:a}}function createLink(e){let r=null,a=!0;const t=document.getElementsByTagName("link");for(let d=0;d<t.length;d++){const _=t[d],h=_.getAttribute("href"),g=_.getAttribute("ref");if(h&&isStaticResourcesEqual(h,e.url)&&g===e.attrs.ref){r=_,a=!1;break}}if(!r){r=document.createElement("link"),r.setAttribute("href",e.url);let d;const _=e.attrs;e.createLinkHook&&(d=e.createLinkHook(e.url,_),d instanceof HTMLLinkElement&&(r=d)),_&&!d&&Object.keys(_).forEach(h=>{r&&!r.getAttribute(h)&&r.setAttribute(h,_[h])})}const i=(d,_)=>{if(r&&(r.onerror=null,r.onload=null,safeWrapper(()=>{const{needDeleteLink:h=!0}=e;h&&(r!=null&&r.parentNode)&&r.parentNode.removeChild(r)}),d)){const h=d(_);return e.cb(),h}e.cb()};return r.onerror=i.bind(null,r.onerror),r.onload=i.bind(null,r.onload),{link:r,needAttach:a}}function loadScript(e,r){const{attrs:a={},createScriptHook:t}=r;return new Promise((i,d)=>{const{script:_,needAttach:h}=createScript({url:e,cb:i,attrs:polyfills$1._extends({fetchpriority:"high"},a),createScriptHook:t,needDeleteScript:!0});h&&document.head.appendChild(_)})}function importNodeModule(e){if(!e)throw new Error("import specifier is required");return new Function("name","return import(name)")(e).then(r=>r).catch(r=>{throw console.error(`Error importing module ${e}:`,r),r})}const loadNodeFetch=async()=>{const e=await importNodeModule("node-fetch");return e.default||e},lazyLoaderHookFetch=async(e,r,a)=>{const t=await((i,d)=>a.lifecycle.fetch.emit(i,d))(e,r||{});return!t||!(t instanceof Response)?(typeof fetch>"u"?await loadNodeFetch():fetch)(e,r||{}):t};function createScriptNode(url,cb,attrs,loaderHook){if(loaderHook!=null&&loaderHook.createScriptHook){const e=loaderHook.createScriptHook(url);e&&typeof e=="object"&&"url"in e&&(url=e.url)}let urlObj;try{urlObj=new URL(url)}catch(e){console.error("Error constructing URL:",e),cb(new Error(`Invalid URL: ${e}`));return}const getFetch=async()=>loaderHook!=null&&loaderHook.fetch?(e,r)=>lazyLoaderHookFetch(e,r,loaderHook):typeof fetch>"u"?loadNodeFetch():fetch,handleScriptFetch=async(f,urlObj)=>{try{var _vm_constants;const res=await f(urlObj.href),data=await res.text(),[path,vm]=await Promise.all([importNodeModule("path"),importNodeModule("vm")]),scriptContext={exports:{},module:{exports:{}}},urlDirname=urlObj.pathname.split("/").slice(0,-1).join("/"),filename=path.basename(urlObj.pathname);var _vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER;const script=new vm.Script(`(function(exports, module, require, __dirname, __filename) {${data}
})`,{filename,importModuleDynamically:(_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER=(_vm_constants=vm.constants)==null?void 0:_vm_constants.USE_MAIN_CONTEXT_DEFAULT_LOADER)!=null?_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER:importNodeModule});script.runInThisContext()(scriptContext.exports,scriptContext.module,eval("require"),urlDirname,filename);const exportedInterface=scriptContext.module.exports||scriptContext.exports;if(attrs&&exportedInterface&&attrs.globalName){const e=exportedInterface[attrs.globalName]||exportedInterface;cb(void 0,e);return}cb(void 0,exportedInterface)}catch(e){cb(e instanceof Error?e:new Error(`Script execution error: ${e}`))}};getFetch().then(async e=>{if((attrs==null?void 0:attrs.type)==="esm"||(attrs==null?void 0:attrs.type)==="module")return loadModule(urlObj.href,{fetch:e,vm:await importNodeModule("vm")}).then(async r=>{await r.evaluate(),cb(void 0,r.namespace)}).catch(r=>{cb(r instanceof Error?r:new Error(`Script execution error: ${r}`))});handleScriptFetch(e,urlObj)}).catch(e=>{cb(e)})}function loadScriptNode(e,r){return new Promise((a,t)=>{createScriptNode(e,(i,d)=>{if(i)t(i);else{var _,h;const g=(r==null||(_=r.attrs)==null?void 0:_.globalName)||`__FEDERATION_${r==null||(h=r.attrs)==null?void 0:h.name}:custom__`,b=globalThis[g]=d;a(b)}},r.attrs,r.loaderHook)})}async function loadModule(e,r){const{fetch:a,vm:t}=r,i=await(await a(e)).text(),d=new t.SourceTextModule(i,{importModuleDynamically:async(_,h)=>{const g=new URL(_,e).href;return loadModule(g,r)}});return await d.link(async _=>{const h=new URL(_,e).href;return await loadModule(h,r)}),d}function normalizeOptions(e,r,a){return function(t){if(t===!1)return!1;if(typeof t>"u")return e?r:!1;if(t===!0)return r;if(t&&typeof t=="object")return polyfills$1._extends({},r,t);throw new Error(`Unexpected type for \`${a}\`, expect boolean/undefined/object, got: ${typeof t}`)}}index_cjs$1.BROWSER_LOG_KEY=BROWSER_LOG_KEY,index_cjs$1.BROWSER_LOG_VALUE=BROWSER_LOG_VALUE,index_cjs$1.ENCODE_NAME_PREFIX=ENCODE_NAME_PREFIX,index_cjs$1.EncodedNameTransformMap=EncodedNameTransformMap,index_cjs$1.FederationModuleManifest=FederationModuleManifest,index_cjs$1.MANIFEST_EXT=MANIFEST_EXT,index_cjs$1.MFModuleType=MFModuleType,index_cjs$1.MFPrefetchCommon=MFPrefetchCommon,index_cjs$1.MODULE_DEVTOOL_IDENTIFIER=MODULE_DEVTOOL_IDENTIFIER,index_cjs$1.ManifestFileName=ManifestFileName,index_cjs$1.NameTransformMap=NameTransformMap,index_cjs$1.NameTransformSymbol=NameTransformSymbol,index_cjs$1.SEPARATOR=SEPARATOR,index_cjs$1.StatsFileName=StatsFileName,index_cjs$1.TEMP_DIR=TEMP_DIR,index_cjs$1.assert=assert$1,index_cjs$1.composeKeyWithSeparator=composeKeyWithSeparator,index_cjs$1.containerPlugin=ContainerPlugin,index_cjs$1.containerReferencePlugin=ContainerReferencePlugin,index_cjs$1.createLink=createLink,index_cjs$1.createLogger=createLogger,index_cjs$1.createScript=createScript,index_cjs$1.createScriptNode=createScriptNode,index_cjs$1.decodeName=decodeName,index_cjs$1.encodeName=encodeName,index_cjs$1.error=error$1,index_cjs$1.generateExposeFilename=generateExposeFilename,index_cjs$1.generateShareFilename=generateShareFilename,index_cjs$1.generateSnapshotFromManifest=generateSnapshotFromManifest,index_cjs$1.getProcessEnv=getProcessEnv,index_cjs$1.getResourceUrl=getResourceUrl,index_cjs$1.inferAutoPublicPath=inferAutoPublicPath,index_cjs$1.isBrowserEnv=isBrowserEnv,index_cjs$1.isDebugMode=isDebugMode,index_cjs$1.isManifestProvider=isManifestProvider,index_cjs$1.isRequiredVersion=isRequiredVersion,index_cjs$1.isStaticResourcesEqual=isStaticResourcesEqual,index_cjs$1.loadScript=loadScript,index_cjs$1.loadScriptNode=loadScriptNode,index_cjs$1.logger=logger$1,index_cjs$1.moduleFederationPlugin=ModuleFederationPlugin,index_cjs$1.normalizeOptions=normalizeOptions,index_cjs$1.parseEntry=parseEntry,index_cjs$1.safeToString=safeToString,index_cjs$1.safeWrapper=safeWrapper,index_cjs$1.sharePlugin=SharePlugin,index_cjs$1.simpleJoinRemoteEntry=simpleJoinRemoteEntry,index_cjs$1.warn=warn$1;var share_cjs={},polyfills=polyfills_cjs$1,sdk=index_cjs$1;function getBuilderId(){return typeof FEDERATION_BUILD_IDENTIFIER<"u"?FEDERATION_BUILD_IDENTIFIER:""}const LOG_CATEGORY="[ Federation Runtime ]",logger=sdk.createLogger(LOG_CATEGORY);function assert(e,r){e||error(r)}function error(e){throw e instanceof Error?(e.message=`${LOG_CATEGORY}: ${e.message}`,e):new Error(`${LOG_CATEGORY}: ${e}`)}function warn(e){e instanceof Error&&(e.message=`${LOG_CATEGORY}: ${e.message}`),logger.warn(e)}function addUniqueItem(e,r){return e.findIndex(a=>a===r)===-1&&e.push(r),e}function getFMId(e){return"version"in e&&e.version?`${e.name}:${e.version}`:"entry"in e&&e.entry?`${e.name}:${e.entry}`:`${e.name}`}function isRemoteInfoWithEntry(e){return typeof e.entry<"u"}function isPureRemoteEntry(e){return!e.entry.includes(".json")&&e.entry.includes(".js")}function isObject(e){return e&&typeof e=="object"}const objectToString=Object.prototype.toString;function isPlainObject(e){return objectToString.call(e)==="[object Object]"}function arrayOptions(e){return Array.isArray(e)?e:[e]}function getRemoteEntryInfoFromSnapshot(e){const r={url:"",type:"global",globalName:""};return sdk.isBrowserEnv()?"remoteEntry"in e?{url:e.remoteEntry,type:e.remoteEntryType,globalName:e.globalName}:r:"ssrRemoteEntry"in e?{url:e.ssrRemoteEntry||r.url,type:e.ssrRemoteEntryType||r.type,globalName:e.globalName}:r}const CurrentGlobal=typeof globalThis=="object"?globalThis:window,nativeGlobal=(()=>{try{return document.defaultView}catch{return CurrentGlobal}})(),Global=nativeGlobal;function definePropertyGlobalVal(e,r,a){Object.defineProperty(e,r,{value:a,configurable:!1,writable:!0})}function includeOwnProperty(e,r){return Object.hasOwnProperty.call(e,r)}includeOwnProperty(CurrentGlobal,"__GLOBAL_LOADING_REMOTE_ENTRY__")||definePropertyGlobalVal(CurrentGlobal,"__GLOBAL_LOADING_REMOTE_ENTRY__",{});const globalLoading=CurrentGlobal.__GLOBAL_LOADING_REMOTE_ENTRY__;function setGlobalDefaultVal(e){var r,a,t,i,d,_;includeOwnProperty(e,"__VMOK__")&&!includeOwnProperty(e,"__FEDERATION__")&&definePropertyGlobalVal(e,"__FEDERATION__",e.__VMOK__),includeOwnProperty(e,"__FEDERATION__")||(definePropertyGlobalVal(e,"__FEDERATION__",{__GLOBAL_PLUGIN__:[],__INSTANCES__:[],moduleInfo:{},__SHARE__:{},__MANIFEST_LOADING__:{},__PRELOADED_MAP__:new Map}),definePropertyGlobalVal(e,"__VMOK__",e.__FEDERATION__));var h;(h=(r=e.__FEDERATION__).__GLOBAL_PLUGIN__)!=null||(r.__GLOBAL_PLUGIN__=[]);var g;(g=(a=e.__FEDERATION__).__INSTANCES__)!=null||(a.__INSTANCES__=[]);var b;(b=(t=e.__FEDERATION__).moduleInfo)!=null||(t.moduleInfo={});var S;(S=(i=e.__FEDERATION__).__SHARE__)!=null||(i.__SHARE__={});var v;(v=(d=e.__FEDERATION__).__MANIFEST_LOADING__)!=null||(d.__MANIFEST_LOADING__={});var j;(j=(_=e.__FEDERATION__).__PRELOADED_MAP__)!=null||(_.__PRELOADED_MAP__=new Map)}setGlobalDefaultVal(CurrentGlobal),setGlobalDefaultVal(nativeGlobal);function resetFederationGlobalInfo(){CurrentGlobal.__FEDERATION__.__GLOBAL_PLUGIN__=[],CurrentGlobal.__FEDERATION__.__INSTANCES__=[],CurrentGlobal.__FEDERATION__.moduleInfo={},CurrentGlobal.__FEDERATION__.__SHARE__={},CurrentGlobal.__FEDERATION__.__MANIFEST_LOADING__={},Object.keys(globalLoading).forEach(e=>{delete globalLoading[e]})}function getGlobalFederationInstance(e,r){const a=getBuilderId();return CurrentGlobal.__FEDERATION__.__INSTANCES__.find(t=>!!(a&&t.options.id===getBuilderId()||t.options.name===e&&!t.options.version&&!r||t.options.name===e&&r&&t.options.version===r))}function setGlobalFederationInstance(e){CurrentGlobal.__FEDERATION__.__INSTANCES__.push(e)}function getGlobalFederationConstructor(){return CurrentGlobal.__FEDERATION__.__DEBUG_CONSTRUCTOR__}function setGlobalFederationConstructor(e,r=sdk.isDebugMode()){r&&(CurrentGlobal.__FEDERATION__.__DEBUG_CONSTRUCTOR__=e,CurrentGlobal.__FEDERATION__.__DEBUG_CONSTRUCTOR_VERSION__="0.7.3")}function getInfoWithoutType(e,r){if(typeof r=="string"){if(e[r])return{value:e[r],key:r};{const a=Object.keys(e);for(const t of a){const[i,d]=t.split(":"),_=`${i}:${r}`,h=e[_];if(h)return{value:h,key:_}}return{value:void 0,key:r}}}else throw new Error("key must be string")}const getGlobalSnapshot=()=>nativeGlobal.__FEDERATION__.moduleInfo,getTargetSnapshotInfoByModuleInfo=(e,r)=>{const a=getFMId(e),t=getInfoWithoutType(r,a).value;if(t&&!t.version&&"version"in e&&e.version&&(t.version=e.version),t)return t;if("version"in e&&e.version){const{version:i}=e,d=polyfills._object_without_properties_loose(e,["version"]),_=getFMId(d),h=getInfoWithoutType(nativeGlobal.__FEDERATION__.moduleInfo,_).value;if((h==null?void 0:h.version)===i)return h}},getGlobalSnapshotInfoByModuleInfo=e=>getTargetSnapshotInfoByModuleInfo(e,nativeGlobal.__FEDERATION__.moduleInfo),setGlobalSnapshotInfoByModuleInfo=(e,r)=>{const a=getFMId(e);return nativeGlobal.__FEDERATION__.moduleInfo[a]=r,nativeGlobal.__FEDERATION__.moduleInfo},addGlobalSnapshot=e=>(nativeGlobal.__FEDERATION__.moduleInfo=polyfills._extends({},nativeGlobal.__FEDERATION__.moduleInfo,e),()=>{const r=Object.keys(e);for(const a of r)delete nativeGlobal.__FEDERATION__.moduleInfo[a]}),getRemoteEntryExports=(e,r)=>{const a=r||`__FEDERATION_${e}:custom__`,t=CurrentGlobal[a];return{remoteEntryKey:a,entryExports:t}},registerGlobalPlugins=e=>{const{__GLOBAL_PLUGIN__:r}=nativeGlobal.__FEDERATION__;e.forEach(a=>{r.findIndex(t=>t.name===a.name)===-1?r.push(a):warn(`The plugin ${a.name} has been registered.`)})},getGlobalHostPlugins=()=>nativeGlobal.__FEDERATION__.__GLOBAL_PLUGIN__,getPreloaded=e=>CurrentGlobal.__FEDERATION__.__PRELOADED_MAP__.get(e),setPreloaded=e=>CurrentGlobal.__FEDERATION__.__PRELOADED_MAP__.set(e,!0),DEFAULT_SCOPE="default",DEFAULT_REMOTE_TYPE="global",buildIdentifier="[0-9A-Za-z-]+",build=`(?:\\+(${buildIdentifier}(?:\\.${buildIdentifier})*))`,numericIdentifier="0|[1-9]\\d*",numericIdentifierLoose="[0-9]+",nonNumericIdentifier="\\d*[a-zA-Z-][a-zA-Z0-9-]*",preReleaseIdentifierLoose=`(?:${numericIdentifierLoose}|${nonNumericIdentifier})`,preReleaseLoose=`(?:-?(${preReleaseIdentifierLoose}(?:\\.${preReleaseIdentifierLoose})*))`,preReleaseIdentifier=`(?:${numericIdentifier}|${nonNumericIdentifier})`,preRelease=`(?:-(${preReleaseIdentifier}(?:\\.${preReleaseIdentifier})*))`,xRangeIdentifier=`${numericIdentifier}|x|X|\\*`,xRangePlain=`[v=\\s]*(${xRangeIdentifier})(?:\\.(${xRangeIdentifier})(?:\\.(${xRangeIdentifier})(?:${preRelease})?${build}?)?)?`,hyphenRange=`^\\s*(${xRangePlain})\\s+-\\s+(${xRangePlain})\\s*$`,mainVersionLoose=`(${numericIdentifierLoose})\\.(${numericIdentifierLoose})\\.(${numericIdentifierLoose})`,loosePlain=`[v=\\s]*${mainVersionLoose}${preReleaseLoose}?${build}?`,gtlt="((?:<|>)?=?)",comparatorTrim=`(\\s*)${gtlt}\\s*(${loosePlain}|${xRangePlain})`,loneTilde="(?:~>?)",tildeTrim=`(\\s*)${loneTilde}\\s+`,loneCaret="(?:\\^)",caretTrim=`(\\s*)${loneCaret}\\s+`,star="(<|>)?=?\\s*\\*",caret=`^${loneCaret}${xRangePlain}$`,mainVersion=`(${numericIdentifier})\\.(${numericIdentifier})\\.(${numericIdentifier})`,fullPlain=`v?${mainVersion}${preRelease}?${build}?`,tilde=`^${loneTilde}${xRangePlain}$`,xRange=`^${gtlt}\\s*${xRangePlain}$`,comparator=`^${gtlt}\\s*(${fullPlain})$|^$`,gte0="^\\s*>=\\s*0.0.0\\s*$";function parseRegex(e){return new RegExp(e)}function isXVersion(e){return!e||e.toLowerCase()==="x"||e==="*"}function pipe(...e){return r=>e.reduce((a,t)=>t(a),r)}function extractComparator(e){return e.match(parseRegex(comparator))}function combineVersion(e,r,a,t){const i=`${e}.${r}.${a}`;return t?`${i}-${t}`:i}function parseHyphen(e){return e.replace(parseRegex(hyphenRange),(r,a,t,i,d,_,h,g,b,S,v,j)=>(isXVersion(t)?a="":isXVersion(i)?a=`>=${t}.0.0`:isXVersion(d)?a=`>=${t}.${i}.0`:a=`>=${a}`,isXVersion(b)?g="":isXVersion(S)?g=`<${Number(b)+1}.0.0-0`:isXVersion(v)?g=`<${b}.${Number(S)+1}.0-0`:j?g=`<=${b}.${S}.${v}-${j}`:g=`<=${g}`,`${a} ${g}`.trim()))}function parseComparatorTrim(e){return e.replace(parseRegex(comparatorTrim),"$1$2$3")}function parseTildeTrim(e){return e.replace(parseRegex(tildeTrim),"$1~")}function parseCaretTrim(e){return e.replace(parseRegex(caretTrim),"$1^")}function parseCarets(e){return e.trim().split(/\s+/).map(r=>r.replace(parseRegex(caret),(a,t,i,d,_)=>isXVersion(t)?"":isXVersion(i)?`>=${t}.0.0 <${Number(t)+1}.0.0-0`:isXVersion(d)?t==="0"?`>=${t}.${i}.0 <${t}.${Number(i)+1}.0-0`:`>=${t}.${i}.0 <${Number(t)+1}.0.0-0`:_?t==="0"?i==="0"?`>=${t}.${i}.${d}-${_} <${t}.${i}.${Number(d)+1}-0`:`>=${t}.${i}.${d}-${_} <${t}.${Number(i)+1}.0-0`:`>=${t}.${i}.${d}-${_} <${Number(t)+1}.0.0-0`:t==="0"?i==="0"?`>=${t}.${i}.${d} <${t}.${i}.${Number(d)+1}-0`:`>=${t}.${i}.${d} <${t}.${Number(i)+1}.0-0`:`>=${t}.${i}.${d} <${Number(t)+1}.0.0-0`)).join(" ")}function parseTildes(e){return e.trim().split(/\s+/).map(r=>r.replace(parseRegex(tilde),(a,t,i,d,_)=>isXVersion(t)?"":isXVersion(i)?`>=${t}.0.0 <${Number(t)+1}.0.0-0`:isXVersion(d)?`>=${t}.${i}.0 <${t}.${Number(i)+1}.0-0`:_?`>=${t}.${i}.${d}-${_} <${t}.${Number(i)+1}.0-0`:`>=${t}.${i}.${d} <${t}.${Number(i)+1}.0-0`)).join(" ")}function parseXRanges(e){return e.split(/\s+/).map(r=>r.trim().replace(parseRegex(xRange),(a,t,i,d,_,h)=>{const g=isXVersion(i),b=g||isXVersion(d),S=b||isXVersion(_);return t==="="&&S&&(t=""),h="",g?t===">"||t==="<"?"<0.0.0-0":"*":t&&S?(b&&(d=0),_=0,t===">"?(t=">=",b?(i=Number(i)+1,d=0,_=0):(d=Number(d)+1,_=0)):t==="<="&&(t="<",b?i=Number(i)+1:d=Number(d)+1),t==="<"&&(h="-0"),`${t+i}.${d}.${_}${h}`):b?`>=${i}.0.0${h} <${Number(i)+1}.0.0-0`:S?`>=${i}.${d}.0${h} <${i}.${Number(d)+1}.0-0`:a})).join(" ")}function parseStar(e){return e.trim().replace(parseRegex(star),"")}function parseGTE0(e){return e.trim().replace(parseRegex(gte0),"")}function compareAtom(e,r){return e=Number(e)||e,r=Number(r)||r,e>r?1:e===r?0:-1}function comparePreRelease(e,r){const{preRelease:a}=e,{preRelease:t}=r;if(a===void 0&&t)return 1;if(a&&t===void 0)return-1;if(a===void 0&&t===void 0)return 0;for(let i=0,d=a.length;i<=d;i++){const _=a[i],h=t[i];if(_!==h)return _===void 0&&h===void 0?0:_?h?compareAtom(_,h):-1:1}return 0}function compareVersion(e,r){return compareAtom(e.major,r.major)||compareAtom(e.minor,r.minor)||compareAtom(e.patch,r.patch)||comparePreRelease(e,r)}function eq(e,r){return e.version===r.version}function compare(e,r){switch(e.operator){case"":case"=":return eq(e,r);case">":return compareVersion(e,r)<0;case">=":return eq(e,r)||compareVersion(e,r)<0;case"<":return compareVersion(e,r)>0;case"<=":return eq(e,r)||compareVersion(e,r)>0;case void 0:return!0;default:return!1}}function parseComparatorString(e){return pipe(parseCarets,parseTildes,parseXRanges,parseStar)(e)}function parseRange(e){return pipe(parseHyphen,parseComparatorTrim,parseTildeTrim,parseCaretTrim)(e.trim()).split(/\s+/).join(" ")}function satisfy(e,r){if(!e)return!1;const a=parseRange(r).split(" ").map(S=>parseComparatorString(S)).join(" ").split(/\s+/).map(S=>parseGTE0(S)),t=extractComparator(e);if(!t)return!1;const[,i,,d,_,h,g]=t,b={version:combineVersion(d,_,h,g),major:d,minor:_,patch:h,preRelease:g==null?void 0:g.split(".")};for(const S of a){const v=extractComparator(S);if(!v)return!1;const[,j,,k,C,V,A]=v,B={operator:j,version:combineVersion(k,C,V,A),major:k,minor:C,patch:V,preRelease:A==null?void 0:A.split(".")};if(!compare(B,b))return!1}return!0}function formatShare(e,r,a,t){let i;"get"in e?i=e.get:"lib"in e?i=()=>Promise.resolve(e.lib):i=()=>Promise.resolve(()=>{throw new Error(`Can not get shared '${a}'!`)}),e.strategy&&warn('"shared.strategy is deprecated, please set in initOptions.shareStrategy instead!"');var d,_,h;return polyfills._extends({deps:[],useIn:[],from:r,loading:null},e,{shareConfig:polyfills._extends({requiredVersion:`^${e.version}`,singleton:!1,eager:!1,strictVersion:!1},e.shareConfig),get:i,loaded:e!=null&&e.loaded||"lib"in e?!0:void 0,version:(d=e.version)!=null?d:"0",scope:Array.isArray(e.scope)?e.scope:[(_=e.scope)!=null?_:"default"],strategy:((h=e.strategy)!=null?h:t)||"version-first"})}function formatShareConfigs(e,r){const a=r.shared||{},t=r.name,i=Object.keys(a).reduce((_,h)=>{const g=arrayOptions(a[h]);return _[h]=_[h]||[],g.forEach(b=>{_[h].push(formatShare(b,t,h,r.shareStrategy))}),_},{}),d=polyfills._extends({},e.shared);return Object.keys(i).forEach(_=>{d[_]?i[_].forEach(h=>{d[_].find(g=>g.version===h.version)||d[_].push(h)}):d[_]=i[_]}),{shared:d,shareInfos:i}}function versionLt(e,r){const a=t=>{if(!Number.isNaN(Number(t))){const i=t.split(".");let d=t;for(let _=0;_<3-i.length;_++)d+=".0";return d}return t};return!!satisfy(a(e),`<=${a(r)}`)}const findVersion=(e,r)=>{const a=r||function(t,i){return versionLt(t,i)};return Object.keys(e).reduce((t,i)=>!t||a(t,i)||t==="0"?i:t,0)},isLoaded=e=>!!e.loaded||typeof e.lib=="function",isLoading=e=>!!e.loading;function findSingletonVersionOrderByVersion(e,r,a){const t=e[r][a],i=function(d,_){return!isLoaded(t[d])&&versionLt(d,_)};return findVersion(e[r][a],i)}function findSingletonVersionOrderByLoaded(e,r,a){const t=e[r][a],i=function(d,_){const h=g=>isLoaded(g)||isLoading(g);return h(t[_])?h(t[d])?!!versionLt(d,_):!0:h(t[d])?!1:versionLt(d,_)};return findVersion(e[r][a],i)}function getFindShareFunction(e){return e==="loaded-first"?findSingletonVersionOrderByLoaded:findSingletonVersionOrderByVersion}function getRegisteredShare(e,r,a,t){if(!e)return;const{shareConfig:i,scope:d=DEFAULT_SCOPE,strategy:_}=a,h=Array.isArray(d)?d:[d];for(const g of h)if(i&&e[g]&&e[g][r]){const{requiredVersion:b}=i,S=getFindShareFunction(_)(e,g,r),v=()=>{if(i.singleton){if(typeof b=="string"&&!satisfy(S,b)){const k=`Version ${S} from ${S&&e[g][r][S].from} of shared singleton module ${r} does not satisfy the requirement of ${a.from} which needs ${b})`;i.strictVersion?error(k):warn(k)}return e[g][r][S]}else{if(b===!1||b==="*"||satisfy(S,b))return e[g][r][S];for(const[k,C]of Object.entries(e[g][r]))if(satisfy(k,b))return C}},j={shareScopeMap:e,scope:g,pkgName:r,version:S,GlobalFederation:Global.__FEDERATION__,resolver:v};return(t.emit(j)||j).resolver()}}function getGlobalShareScope(){return Global.__FEDERATION__.__SHARE__}function getTargetSharedOptions(e){const{pkgName:r,extraOptions:a,shareInfos:t}=e,i=h=>{if(!h)return;const g={};h.forEach(S=>{g[S.version]=S});const b=findVersion(g,function(S,v){return!isLoaded(g[S])&&versionLt(S,v)});return g[b]};var d;const _=(d=a==null?void 0:a.resolver)!=null?d:i;return Object.assign({},_(t[r]),a==null?void 0:a.customShareInfo)}share_cjs.CurrentGlobal=CurrentGlobal,share_cjs.DEFAULT_REMOTE_TYPE=DEFAULT_REMOTE_TYPE,share_cjs.DEFAULT_SCOPE=DEFAULT_SCOPE,share_cjs.Global=Global,share_cjs.addGlobalSnapshot=addGlobalSnapshot,share_cjs.addUniqueItem=addUniqueItem,share_cjs.arrayOptions=arrayOptions,share_cjs.assert=assert,share_cjs.error=error,share_cjs.formatShareConfigs=formatShareConfigs,share_cjs.getBuilderId=getBuilderId,share_cjs.getFMId=getFMId,share_cjs.getGlobalFederationConstructor=getGlobalFederationConstructor,share_cjs.getGlobalFederationInstance=getGlobalFederationInstance,share_cjs.getGlobalHostPlugins=getGlobalHostPlugins,share_cjs.getGlobalShareScope=getGlobalShareScope,share_cjs.getGlobalSnapshot=getGlobalSnapshot,share_cjs.getGlobalSnapshotInfoByModuleInfo=getGlobalSnapshotInfoByModuleInfo,share_cjs.getInfoWithoutType=getInfoWithoutType,share_cjs.getPreloaded=getPreloaded,share_cjs.getRegisteredShare=getRegisteredShare,share_cjs.getRemoteEntryExports=getRemoteEntryExports,share_cjs.getRemoteEntryInfoFromSnapshot=getRemoteEntryInfoFromSnapshot,share_cjs.getTargetSharedOptions=getTargetSharedOptions,share_cjs.getTargetSnapshotInfoByModuleInfo=getTargetSnapshotInfoByModuleInfo,share_cjs.globalLoading=globalLoading,share_cjs.isObject=isObject,share_cjs.isPlainObject=isPlainObject,share_cjs.isPureRemoteEntry=isPureRemoteEntry,share_cjs.isRemoteInfoWithEntry=isRemoteInfoWithEntry,share_cjs.logger=logger,share_cjs.nativeGlobal=nativeGlobal,share_cjs.registerGlobalPlugins=registerGlobalPlugins,share_cjs.resetFederationGlobalInfo=resetFederationGlobalInfo,share_cjs.setGlobalFederationConstructor=setGlobalFederationConstructor,share_cjs.setGlobalFederationInstance=setGlobalFederationInstance,share_cjs.setGlobalSnapshotInfoByModuleInfo=setGlobalSnapshotInfoByModuleInfo,share_cjs.setPreloaded=setPreloaded,share_cjs.warn=warn;var index_cjs={};const RUNTIME_001="RUNTIME-001",RUNTIME_002="RUNTIME-002",RUNTIME_003="RUNTIME-003",RUNTIME_004="RUNTIME-004",RUNTIME_005="RUNTIME-005",RUNTIME_006="RUNTIME-006",RUNTIME_007="RUNTIME-007",TYPE_001="TYPE-001",getDocsUrl=e=>`https://module-federation.io/guide/troubleshooting/${e.split("-")[0].toLowerCase()}/${e}`,getShortErrorMsg=(e,r,a,t)=>{const i=[`${[r[e]]} #${e}`];return a&&i.push(`args: ${JSON.stringify(a)}`),i.push(getDocsUrl(e)),t&&i.push(`Original Error Message:
 ${t}`),i.join(`
`)};function _extends(){return _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},_extends.apply(this,arguments)}const runtimeDescMap={[RUNTIME_001]:"Failed to get remoteEntry exports.",[RUNTIME_002]:'The remote entry interface does not contain "init"',[RUNTIME_003]:"Failed to get manifest.",[RUNTIME_004]:"Failed to locate remote.",[RUNTIME_005]:"Invalid loadShareSync function call from bundler runtime",[RUNTIME_006]:"Invalid loadShareSync function call from runtime",[RUNTIME_007]:"Failed to get remote snapshot."},typeDescMap={[TYPE_001]:"Failed to generate type declaration."},errorDescMap=_extends({},runtimeDescMap,typeDescMap);index_cjs.RUNTIME_001=RUNTIME_001,index_cjs.RUNTIME_002=RUNTIME_002,index_cjs.RUNTIME_003=RUNTIME_003,index_cjs.RUNTIME_004=RUNTIME_004,index_cjs.RUNTIME_005=RUNTIME_005,index_cjs.RUNTIME_006=RUNTIME_006,index_cjs.RUNTIME_007=RUNTIME_007,index_cjs.TYPE_001=TYPE_001,index_cjs.errorDescMap=errorDescMap,index_cjs.getShortErrorMsg=getShortErrorMsg,index_cjs.runtimeDescMap=runtimeDescMap,index_cjs.typeDescMap=typeDescMap,function(e){var r=polyfills_cjs$1,a=index_cjs$1,t=share_cjs,i=index_cjs;function d(m,o){for(const n of m){const s=o.startsWith(n.name);let l=o.replace(n.name,"");if(s){if(l.startsWith("/")){const u=n.name;return l=`.${l}`,{pkgNameOrAlias:u,expose:l,remote:n}}else if(l==="")return{pkgNameOrAlias:n.name,expose:".",remote:n}}const p=n.alias&&o.startsWith(n.alias);let c=n.alias&&o.replace(n.alias,"");if(n.alias&&p){if(c&&c.startsWith("/")){const u=n.alias;return c=`.${c}`,{pkgNameOrAlias:u,expose:c,remote:n}}else if(c==="")return{pkgNameOrAlias:n.alias,expose:".",remote:n}}}}function _(m,o){for(const n of m)if(o===n.name||n.alias&&o===n.alias)return n}function h(m,o){const n=t.getGlobalHostPlugins();return n.length>0&&n.forEach(s=>{m!=null&&m.find(l=>l.name!==s.name)&&m.push(s)}),m&&m.length>0&&m.forEach(s=>{o.forEach(l=>{l.applyPlugin(s)})}),m}async function g({entry:m,remoteEntryExports:o}){return new Promise((n,s)=>{try{o?n(o):import(m).then(async l=>(await l.__tla,l)).then(n).catch(s)}catch(l){s(l)}})}async function b({entry:m,remoteEntryExports:o}){return new Promise((n,s)=>{try{o?n(o):typeof __system_context__>"u"?System.import(m).then(n).catch(s):new Function("callbacks",`System.import("${m}").then(callbacks[0]).catch(callbacks[1])`)([n,s])}catch(l){s(l)}})}async function S({name:m,globalName:o,entry:n,loaderHook:s}){const{entryExports:l}=t.getRemoteEntryExports(m,o);return l||a.loadScript(n,{attrs:{},createScriptHook:(p,c)=>{const u=s.lifecycle.createScript.emit({url:p,attrs:c});if(u&&(u instanceof HTMLScriptElement||"script"in u||"timeout"in u))return u}}).then(()=>{const{remoteEntryKey:p,entryExports:c}=t.getRemoteEntryExports(m,o);return t.assert(c,i.getShortErrorMsg(i.RUNTIME_001,i.runtimeDescMap,{remoteName:m,remoteEntryUrl:n,remoteEntryKey:p})),c}).catch(p=>{throw p})}async function v({remoteInfo:m,remoteEntryExports:o,loaderHook:n}){const{entry:s,entryGlobalName:l,name:p,type:c}=m;switch(c){case"esm":case"module":return g({entry:s,remoteEntryExports:o});case"system":return b({entry:s,remoteEntryExports:o});default:return S({entry:s,globalName:l,name:p,loaderHook:n})}}async function j({remoteInfo:m,loaderHook:o}){const{entry:n,entryGlobalName:s,name:l,type:p}=m,{entryExports:c}=t.getRemoteEntryExports(l,s);return c||a.loadScriptNode(n,{attrs:{name:l,globalName:s,type:p},loaderHook:{createScriptHook:(u,E={})=>{const y=o.lifecycle.createScript.emit({url:u,attrs:E});if(y&&"url"in y)return y}}}).then(()=>{const{remoteEntryKey:u,entryExports:E}=t.getRemoteEntryExports(l,s);return t.assert(E,i.getShortErrorMsg(i.RUNTIME_001,i.runtimeDescMap,{remoteName:l,remoteEntryUrl:n,remoteEntryKey:u})),E}).catch(u=>{throw u})}function k(m){const{entry:o,name:n}=m;return a.composeKeyWithSeparator(n,o)}async function C({origin:m,remoteEntryExports:o,remoteInfo:n}){const s=k(n);if(o)return o;if(!t.globalLoading[s]){const l=m.remoteHandler.hooks.lifecycle.loadEntry;m.loaderHook.lifecycle.createScript;const p=m.loaderHook;t.globalLoading[s]=l.emit({loaderHook:p,remoteInfo:n,remoteEntryExports:o}).then(c=>c||(a.isBrowserEnv()?v({remoteInfo:n,remoteEntryExports:o,loaderHook:p}):j({remoteInfo:n,loaderHook:p})))}return t.globalLoading[s]}function V(m){return r._extends({},m,{entry:"entry"in m?m.entry:"",type:m.type||t.DEFAULT_REMOTE_TYPE,entryGlobalName:m.entryGlobalName||m.name,shareScope:m.shareScope||t.DEFAULT_SCOPE})}let A=class{async getEntry(){if(this.remoteEntryExports)return this.remoteEntryExports;const m=await C({origin:this.host,remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports});return t.assert(m,`remoteEntryExports is undefined 
 ${a.safeToString(this.remoteInfo)}`),this.remoteEntryExports=m,this.remoteEntryExports}async get(m,o,n,s){const{loadFactory:l=!0}=n||{loadFactory:!0},p=await this.getEntry();if(!this.inited){const E=this.host.shareScopeMap,y=this.remoteInfo.shareScope||"default";E[y]||(E[y]={});const R=E[y],T=[],$={version:this.remoteInfo.version||""};Object.defineProperty($,"shareScopeMap",{value:E,enumerable:!1});const N=await this.host.hooks.lifecycle.beforeInitContainer.emit({shareScope:R,remoteEntryInitOptions:$,initScope:T,remoteInfo:this.remoteInfo,origin:this.host});typeof(p==null?void 0:p.init)>"u"&&t.error(i.getShortErrorMsg(i.RUNTIME_002,i.runtimeDescMap,{remoteName:name,remoteEntryUrl:this.remoteInfo.entry,remoteEntryKey:this.remoteInfo.entryGlobalName})),await p.init(N.shareScope,N.initScope,N.remoteEntryInitOptions),await this.host.hooks.lifecycle.initContainer.emit(r._extends({},N,{id:m,remoteSnapshot:s,remoteEntryExports:p}))}this.lib=p,this.inited=!0;let c;c=await this.host.loaderHook.lifecycle.getModuleFactory.emit({remoteEntryExports:p,expose:o,moduleInfo:this.remoteInfo}),c||(c=await p.get(o)),t.assert(c,`${t.getFMId(this.remoteInfo)} remote don't export ${o}.`);const u=this.wraperFactory(c,m);return l?await u():u}wraperFactory(m,o){function n(s,l){s&&typeof s=="object"&&Object.isExtensible(s)&&!Object.getOwnPropertyDescriptor(s,Symbol.for("mf_module_id"))&&Object.defineProperty(s,Symbol.for("mf_module_id"),{value:l,enumerable:!1})}return m instanceof Promise?async()=>{const s=await m();return n(s,o),s}:()=>{const s=m();return n(s,o),s}}constructor({remoteInfo:m,host:o}){this.inited=!1,this.lib=void 0,this.remoteInfo=m,this.host=o}};class B{on(o){typeof o=="function"&&this.listeners.add(o)}once(o){const n=this;this.on(function s(...l){return n.remove(s),o.apply(null,l)})}emit(...o){let n;return this.listeners.size>0&&this.listeners.forEach(s=>{n=s(...o)}),n}remove(o){this.listeners.delete(o)}removeAll(){this.listeners.clear()}constructor(o){this.type="",this.listeners=new Set,o&&(this.type=o)}}class U extends B{emit(...o){let n;const s=Array.from(this.listeners);if(s.length>0){let l=0;const p=c=>c===!1?!1:l<s.length?Promise.resolve(s[l++].apply(null,o)).then(p):c;n=p()}return Promise.resolve(n)}}function J(m,o){if(!t.isObject(o))return!1;if(m!==o){for(const n in m)if(!(n in o))return!1}return!0}class X extends B{emit(o){t.isObject(o)||t.error(`The data for the "${this.type}" hook should be an object.`);for(const n of this.listeners)try{const s=n(o);if(J(o,s))o=s;else{this.onerror(`A plugin returned an unacceptable value for the "${this.type}" type.`);break}}catch(s){t.warn(s),this.onerror(s)}return o}constructor(o){super(),this.onerror=t.error,this.type=o}}class M extends B{emit(o){t.isObject(o)||t.error(`The response data for the "${this.type}" hook must be an object.`);const n=Array.from(this.listeners);if(n.length>0){let s=0;const l=c=>(t.warn(c),this.onerror(c),o),p=c=>{if(J(o,c)){if(o=c,s<n.length)try{return Promise.resolve(n[s++](o)).then(p,l)}catch(u){return l(u)}}else this.onerror(`A plugin returned an incorrect value for the "${this.type}" type.`);return o};return Promise.resolve(p(o))}return Promise.resolve(o)}constructor(o){super(),this.onerror=t.error,this.type=o}}class Y{applyPlugin(o){t.assert(t.isPlainObject(o),"Plugin configuration is invalid.");const n=o.name;t.assert(n,"A name must be provided by the plugin."),this.registerPlugins[n]||(this.registerPlugins[n]=o,Object.keys(this.lifecycle).forEach(s=>{const l=o[s];l&&this.lifecycle[s].on(l)}))}removePlugin(o){t.assert(o,"A name is required.");const n=this.registerPlugins[o];t.assert(n,`The plugin "${o}" is not registered.`),Object.keys(n).forEach(s=>{s!=="name"&&this.lifecycle[s].remove(n[s])})}inherit({lifecycle:o,registerPlugins:n}){Object.keys(o).forEach(s=>{t.assert(!this.lifecycle[s],`The hook "${s}" has a conflict and cannot be inherited.`),this.lifecycle[s]=o[s]}),Object.keys(n).forEach(s=>{t.assert(!this.registerPlugins[s],`The plugin "${s}" has a conflict and cannot be inherited.`),this.applyPlugin(n[s])})}constructor(o){this.registerPlugins={},this.lifecycle=o,this.lifecycleKeys=Object.keys(o)}}function z(m){return r._extends({resourceCategory:"sync",share:!0,depsRemote:!0,prefetchInterface:!1},m)}function Z(m,o){return o.map(n=>{const s=_(m,n.nameOrAlias);return t.assert(s,`Unable to preload ${n.nameOrAlias} as it is not included in ${!s&&a.safeToString({remoteInfo:s,remotes:m})}`),{remote:s,preloadConfig:z(n)}})}function se(m){return m?m.map(o=>o==="."?o:o.startsWith("./")?o.replace("./",""):o):[]}function te(m,o,n,s=!0){const{cssAssets:l,jsAssetsWithoutEntry:p,entryAssets:c}=n;if(o.options.inBrowser){if(c.forEach(u=>{const{moduleInfo:E}=u,y=o.moduleCache.get(m.name);C(y?{origin:o,remoteInfo:E,remoteEntryExports:y.remoteEntryExports}:{origin:o,remoteInfo:E,remoteEntryExports:void 0})}),s){const u={rel:"preload",as:"style"};l.forEach(E=>{const{link:y,needAttach:R}=a.createLink({url:E,cb:()=>{},attrs:u,createLinkHook:(T,$)=>{const N=o.loaderHook.lifecycle.createLink.emit({url:T,attrs:$});if(N instanceof HTMLLinkElement)return N}});R&&document.head.appendChild(y)})}else{const u={rel:"stylesheet",type:"text/css"};l.forEach(E=>{const{link:y,needAttach:R}=a.createLink({url:E,cb:()=>{},attrs:u,createLinkHook:(T,$)=>{const N=o.loaderHook.lifecycle.createLink.emit({url:T,attrs:$});if(N instanceof HTMLLinkElement)return N},needDeleteLink:!1});R&&document.head.appendChild(y)})}if(s){const u={rel:"preload",as:"script"};p.forEach(E=>{const{link:y,needAttach:R}=a.createLink({url:E,cb:()=>{},attrs:u,createLinkHook:(T,$)=>{const N=o.loaderHook.lifecycle.createLink.emit({url:T,attrs:$});if(N instanceof HTMLLinkElement)return N}});R&&document.head.appendChild(y)})}else{const u={fetchpriority:"high",type:(m==null?void 0:m.type)==="module"?"module":"text/javascript"};p.forEach(E=>{const{script:y,needAttach:R}=a.createScript({url:E,cb:()=>{},attrs:u,createScriptHook:(T,$)=>{const N=o.loaderHook.lifecycle.createScript.emit({url:T,attrs:$});if(N instanceof HTMLScriptElement)return N},needDeleteScript:!0});R&&document.head.appendChild(y)})}}}function oe(m,o){const n=t.getRemoteEntryInfoFromSnapshot(o);n.url||t.error(`The attribute remoteEntry of ${m.name} must not be undefined.`);let s=a.getResourceUrl(o,n.url);!a.isBrowserEnv()&&!s.startsWith("http")&&(s=`https:${s}`),m.type=n.type,m.entryGlobalName=n.globalName,m.entry=s,m.version=o.version,m.buildVersion=o.buildVersion}function ae(){return{name:"snapshot-plugin",async afterResolve(m){const{remote:o,pkgNameOrAlias:n,expose:s,origin:l,remoteInfo:p}=m;if(!t.isRemoteInfoWithEntry(o)||!t.isPureRemoteEntry(o)){const{remoteSnapshot:c,globalSnapshot:u}=await l.snapshotHandler.loadRemoteSnapshotInfo(o);oe(p,c);const E={remote:o,preloadConfig:{nameOrAlias:n,exposes:[s],resourceCategory:"sync",share:!1,depsRemote:!1}},y=await l.remoteHandler.hooks.lifecycle.generatePreloadAssets.emit({origin:l,preloadOptions:E,remoteInfo:p,remote:o,remoteSnapshot:c,globalSnapshot:u});return y&&te(p,l,y,!1),r._extends({},m,{remoteSnapshot:c})}return m}}}function ie(m){const o=m.split(":");return o.length===1?{name:o[0],version:void 0}:o.length===2?{name:o[0],version:o[1]}:{name:o[1],version:o[2]}}function re(m,o,n,s,l={},p){const c=t.getFMId(o),{value:u}=t.getInfoWithoutType(m,c),E=p||u;if(E&&!a.isManifestProvider(E)&&(n(E,o,s),E.remotesInfo)){const y=Object.keys(E.remotesInfo);for(const R of y){if(l[R])continue;l[R]=!0;const T=ie(R),$=E.remotesInfo[R];re(m,{name:T.name,version:$.matchedVersion},n,!1,l,void 0)}}}function le(m,o,n,s,l){const p=[],c=[],u=[],E=new Set,y=new Set,{options:R}=m,{preloadConfig:T}=o,{depsRemote:$}=T;if(re(s,n,(I,O,L)=>{let P;if(L)P=T;else if(Array.isArray($)){const H=$.find(w=>w.nameOrAlias===O.name||w.nameOrAlias===O.alias);if(!H)return;P=z(H)}else if($===!0)P=T;else return;const G=a.getResourceUrl(I,t.getRemoteEntryInfoFromSnapshot(I).url);G&&u.push({name:O.name,moduleInfo:{name:O.name,entry:G,type:"remoteEntryType"in I?I.remoteEntryType:"global",entryGlobalName:"globalName"in I?I.globalName:O.name,shareScope:"",version:"version"in I?I.version:void 0},url:G});let D="modules"in I?I.modules:[];const F=se(P.exposes);if(F.length&&"modules"in I){var K;D=I==null||(K=I.modules)==null?void 0:K.reduce((H,w)=>((F==null?void 0:F.indexOf(w.moduleName))!==-1&&H.push(w),H),[])}function W(H){const w=H.map(q=>a.getResourceUrl(I,q));return P.filter?w.filter(P.filter):w}if(D){const H=D.length;for(let w=0;w<H;w++){const q=D[w],ee=`${O.name}/${q.moduleName}`;m.remoteHandler.hooks.lifecycle.handlePreloadModule.emit({id:q.moduleName==="."?O.name:ee,name:O.name,remoteSnapshot:I,preloadConfig:P,remote:O,origin:m}),!t.getPreloaded(ee)&&(P.resourceCategory==="all"?(p.push(...W(q.assets.css.async)),p.push(...W(q.assets.css.sync)),c.push(...W(q.assets.js.async)),c.push(...W(q.assets.js.sync))):(P.resourceCategory="sync")&&(p.push(...W(q.assets.css.sync)),c.push(...W(q.assets.js.sync))),t.setPreloaded(ee))}}},!0,{},l),l.shared){const I=(O,L)=>{const P=t.getRegisteredShare(m.shareScopeMap,L.sharedName,O,m.sharedHandler.hooks.lifecycle.resolveShare);P&&typeof P.lib=="function"&&(L.assets.js.sync.forEach(G=>{E.add(G)}),L.assets.css.sync.forEach(G=>{y.add(G)}))};l.shared.forEach(O=>{var L;const P=(L=R.shared)==null?void 0:L[O.sharedName];if(!P)return;const G=O.version?P.find(D=>D.version===O.version):P;G&&t.arrayOptions(G).forEach(D=>{I(D,O)})})}const N=c.filter(I=>!E.has(I));return{cssAssets:p.filter(I=>!y.has(I)),jsAssetsWithoutEntry:N,entryAssets:u}}const ce=function(){return{name:"generate-preload-assets-plugin",async generatePreloadAssets(m){const{origin:o,preloadOptions:n,remoteInfo:s,remote:l,globalSnapshot:p,remoteSnapshot:c}=m;return t.isRemoteInfoWithEntry(l)&&t.isPureRemoteEntry(l)?{cssAssets:[],jsAssetsWithoutEntry:[],entryAssets:[{name:l.name,url:l.entry,moduleInfo:{name:s.name,entry:l.entry,type:s.type||"global",entryGlobalName:"",shareScope:""}}]}:(oe(s,c),le(o,n,s,p,c))}}};function ne(m,o){const n=t.getGlobalSnapshotInfoByModuleInfo({name:o.options.name,version:o.options.version}),s=n&&"remotesInfo"in n&&n.remotesInfo&&t.getInfoWithoutType(n.remotesInfo,m.name).value;return s&&s.matchedVersion?{hostGlobalSnapshot:n,globalSnapshot:t.getGlobalSnapshot(),remoteSnapshot:t.getGlobalSnapshotInfoByModuleInfo({name:m.name,version:s.matchedVersion})}:{hostGlobalSnapshot:void 0,globalSnapshot:t.getGlobalSnapshot(),remoteSnapshot:t.getGlobalSnapshotInfoByModuleInfo({name:m.name,version:"version"in m?m.version:void 0})}}class ue{async loadSnapshot(o){const{options:n}=this.HostInstance,{hostGlobalSnapshot:s,remoteSnapshot:l,globalSnapshot:p}=this.getGlobalRemoteInfo(o),{remoteSnapshot:c,globalSnapshot:u}=await this.hooks.lifecycle.loadSnapshot.emit({options:n,moduleInfo:o,hostGlobalSnapshot:s,remoteSnapshot:l,globalSnapshot:p});return{remoteSnapshot:c,globalSnapshot:u}}async loadRemoteSnapshotInfo(o){const{options:n}=this.HostInstance;await this.hooks.lifecycle.beforeLoadRemoteSnapshot.emit({options:n,moduleInfo:o});let s=t.getGlobalSnapshotInfoByModuleInfo({name:this.HostInstance.options.name,version:this.HostInstance.options.version});s||(s={version:this.HostInstance.options.version||"",remoteEntry:"",remotesInfo:{}},t.addGlobalSnapshot({[this.HostInstance.options.name]:s})),s&&"remotesInfo"in s&&!t.getInfoWithoutType(s.remotesInfo,o.name).value&&("version"in o||"entry"in o)&&(s.remotesInfo=r._extends({},s==null?void 0:s.remotesInfo,{[o.name]:{matchedVersion:"version"in o?o.version:o.entry}}));const{hostGlobalSnapshot:l,remoteSnapshot:p,globalSnapshot:c}=this.getGlobalRemoteInfo(o),{remoteSnapshot:u,globalSnapshot:E}=await this.hooks.lifecycle.loadSnapshot.emit({options:n,moduleInfo:o,hostGlobalSnapshot:l,remoteSnapshot:p,globalSnapshot:c});if(u)if(a.isManifestProvider(u)){const y=a.isBrowserEnv()?u.remoteEntry:u.ssrRemoteEntry||u.remoteEntry||"",R=await this.getManifestJson(y,o,{}),T=t.setGlobalSnapshotInfoByModuleInfo(r._extends({},o,{entry:y}),R);return{remoteSnapshot:R,globalSnapshot:T}}else{const{remoteSnapshot:y}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:o,remoteSnapshot:u,from:"global"});return{remoteSnapshot:y,globalSnapshot:E}}else if(t.isRemoteInfoWithEntry(o)){const y=await this.getManifestJson(o.entry,o,{}),R=t.setGlobalSnapshotInfoByModuleInfo(o,y),{remoteSnapshot:T}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:o,remoteSnapshot:y,from:"global"});return{remoteSnapshot:T,globalSnapshot:R}}else t.error(i.getShortErrorMsg(i.RUNTIME_007,i.runtimeDescMap,{hostName:o.name,hostVersion:o.version,globalSnapshot:JSON.stringify(E)}))}getGlobalRemoteInfo(o){return ne(o,this.HostInstance)}async getManifestJson(o,n,s){const l=async()=>{let c=this.manifestCache.get(o);if(c)return c;try{let u=await this.loaderHook.lifecycle.fetch.emit(o,{});return(!u||!(u instanceof Response))&&(u=await fetch(o,{})),c=await u.json(),t.assert(c.metaData&&c.exposes&&c.shared,`${o} is not a federation manifest`),this.manifestCache.set(o,c),c}catch(u){delete this.manifestLoading[o],t.error(i.getShortErrorMsg(i.RUNTIME_003,i.runtimeDescMap,{manifestUrl:o,moduleName:n.name},`${u}`))}},p=async()=>{const c=await l(),u=a.generateSnapshotFromManifest(c,{version:o}),{remoteSnapshot:E}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:n,manifestJson:c,remoteSnapshot:u,manifestUrl:o,from:"manifest"});return E};return this.manifestLoading[o]||(this.manifestLoading[o]=p().then(c=>c)),this.manifestLoading[o]}constructor(o){this.loadingHostSnapshot=null,this.manifestCache=new Map,this.hooks=new Y({beforeLoadRemoteSnapshot:new U("beforeLoadRemoteSnapshot"),loadSnapshot:new M("loadGlobalSnapshot"),loadRemoteSnapshot:new M("loadRemoteSnapshot")}),this.manifestLoading=t.Global.__FEDERATION__.__MANIFEST_LOADING__,this.HostInstance=o,this.loaderHook=o.loaderHook}}class me{registerShared(o,n){const{shareInfos:s,shared:l}=t.formatShareConfigs(o,n);return Object.keys(s).forEach(p=>{s[p].forEach(c=>{!t.getRegisteredShare(this.shareScopeMap,p,c,this.hooks.lifecycle.resolveShare)&&c&&c.lib&&this.setShared({pkgName:p,lib:c.lib,get:c.get,loaded:!0,shared:c,from:n.name})})}),{shareInfos:s,shared:l}}async loadShare(o,n){const{host:s}=this,l=t.getTargetSharedOptions({pkgName:o,extraOptions:n,shareInfos:s.options.shared});l!=null&&l.scope&&await Promise.all(l.scope.map(async y=>{await Promise.all(this.initializeSharing(y,{strategy:l.strategy}))}));const p=await this.hooks.lifecycle.beforeLoadShare.emit({pkgName:o,shareInfo:l,shared:s.options.shared,origin:s}),{shareInfo:c}=p;t.assert(c,`Cannot find ${o} Share in the ${s.options.name}. Please ensure that the ${o} Share parameters have been injected`);const u=t.getRegisteredShare(this.shareScopeMap,o,c,this.hooks.lifecycle.resolveShare),E=y=>{y.useIn||(y.useIn=[]),t.addUniqueItem(y.useIn,s.options.name)};if(u&&u.lib)return E(u),u.lib;if(u&&u.loading&&!u.loaded){const y=await u.loading;return u.loaded=!0,u.lib||(u.lib=y),E(u),y}else if(u){const y=(async()=>{const R=await u.get();c.lib=R,c.loaded=!0,E(c);const T=t.getRegisteredShare(this.shareScopeMap,o,c,this.hooks.lifecycle.resolveShare);return T&&(T.lib=R,T.loaded=!0),R})();return this.setShared({pkgName:o,loaded:!1,shared:u,from:s.options.name,lib:null,loading:y}),y}else{if(n!=null&&n.customShareInfo)return!1;const y=(async()=>{const R=await c.get();c.lib=R,c.loaded=!0,E(c);const T=t.getRegisteredShare(this.shareScopeMap,o,c,this.hooks.lifecycle.resolveShare);return T&&(T.lib=R,T.loaded=!0),R})();return this.setShared({pkgName:o,loaded:!1,shared:c,from:s.options.name,lib:null,loading:y}),y}}initializeSharing(o=t.DEFAULT_SCOPE,n){const{host:s}=this,l=n==null?void 0:n.from,p=n==null?void 0:n.strategy;let c=n==null?void 0:n.initScope;const u=[];if(l!=="build"){const{initTokens:I}=this;c||(c=[]);let O=I[o];if(O||(O=I[o]={from:this.host.name}),c.indexOf(O)>=0)return u;c.push(O)}const E=this.shareScopeMap,y=s.options.name;E[o]||(E[o]={});const R=E[o],T=(I,O)=>{var L;const{version:P,eager:G}=O;R[I]=R[I]||{};const D=R[I],F=D[P],K=!!(F&&(F.eager||(L=F.shareConfig)!=null&&L.eager));(!F||F.strategy!=="loaded-first"&&!F.loaded&&(!G!=!K?G:y>F.from))&&(D[P]=O)},$=I=>I&&I.init&&I.init(E[o],c),N=async I=>{const{module:O}=await s.remoteHandler.getRemoteModuleAndOptions({id:I});if(O.getEntry){let L;try{L=await O.getEntry()}catch(P){L=await s.remoteHandler.hooks.lifecycle.errorLoadRemote.emit({id:I,error:P,from:"runtime",lifecycle:"beforeLoadShare",origin:s})}O.inited||(await $(L),O.inited=!0)}};return Object.keys(s.options.shared).forEach(I=>{s.options.shared[I].forEach(O=>{O.scope.includes(o)&&T(I,O)})}),(s.options.shareStrategy==="version-first"||p==="version-first")&&s.options.remotes.forEach(I=>{I.shareScope===o&&u.push(N(I.name))}),u}loadShareSync(o,n){const{host:s}=this,l=t.getTargetSharedOptions({pkgName:o,extraOptions:n,shareInfos:s.options.shared});l!=null&&l.scope&&l.scope.forEach(u=>{this.initializeSharing(u,{strategy:l.strategy})});const p=t.getRegisteredShare(this.shareScopeMap,o,l,this.hooks.lifecycle.resolveShare),c=u=>{u.useIn||(u.useIn=[]),t.addUniqueItem(u.useIn,s.options.name)};if(p){if(typeof p.lib=="function")return c(p),p.loaded||(p.loaded=!0,p.from===s.options.name&&(l.loaded=!0)),p.lib;if(typeof p.get=="function"){const u=p.get();if(!(u instanceof Promise))return c(p),this.setShared({pkgName:o,loaded:!0,from:s.options.name,lib:u,shared:p}),u}}if(l.lib)return l.loaded||(l.loaded=!0),l.lib;if(l.get){const u=l.get();if(u instanceof Promise){const E=(n==null?void 0:n.from)==="build"?i.RUNTIME_005:i.RUNTIME_006;throw new Error(i.getShortErrorMsg(E,i.runtimeDescMap,{hostName:s.options.name,sharedPkgName:o}))}return l.lib=u,this.setShared({pkgName:o,loaded:!0,from:s.options.name,lib:l.lib,shared:l}),l.lib}throw new Error(i.getShortErrorMsg(i.RUNTIME_006,i.runtimeDescMap,{hostName:s.options.name,sharedPkgName:o}))}initShareScopeMap(o,n,s={}){const{host:l}=this;this.shareScopeMap[o]=n,this.hooks.lifecycle.initContainerShareScopeMap.emit({shareScope:n,options:l.options,origin:l,scopeName:o,hostShareScopeMap:s.hostShareScopeMap})}setShared({pkgName:o,shared:n,from:s,lib:l,loading:p,loaded:c,get:u}){const{version:E,scope:y="default"}=n,R=r._object_without_properties_loose(n,["version","scope"]);(Array.isArray(y)?y:[y]).forEach(T=>{if(this.shareScopeMap[T]||(this.shareScopeMap[T]={}),this.shareScopeMap[T][o]||(this.shareScopeMap[T][o]={}),!this.shareScopeMap[T][o][E]){this.shareScopeMap[T][o][E]=r._extends({version:E,scope:["default"]},R,{lib:l,loaded:c,loading:p}),u&&(this.shareScopeMap[T][o][E].get=u);return}const $=this.shareScopeMap[T][o][E];p&&!$.loading&&($.loading=p)})}_setGlobalShareScopeMap(o){const n=t.getGlobalShareScope(),s=o.id||o.name;s&&!n[s]&&(n[s]=this.shareScopeMap)}constructor(o){this.hooks=new Y({afterResolve:new M("afterResolve"),beforeLoadShare:new M("beforeLoadShare"),loadShare:new U,resolveShare:new X("resolveShare"),initContainerShareScopeMap:new X("initContainerShareScopeMap")}),this.host=o,this.shareScopeMap={},this.initTokens={},this._setGlobalShareScopeMap(o.options)}}class pe{formatAndRegisterRemote(o,n){return(n.remotes||[]).reduce((s,l)=>(this.registerRemote(l,s,{force:!1}),s),o.remotes)}setIdToRemoteMap(o,n){const{remote:s,expose:l}=n,{name:p,alias:c}=s;if(this.idToRemoteMap[o]={name:s.name,expose:l},c&&o.startsWith(p)){const u=o.replace(p,c);this.idToRemoteMap[u]={name:s.name,expose:l};return}if(c&&o.startsWith(c)){const u=o.replace(c,p);this.idToRemoteMap[u]={name:s.name,expose:l}}}async loadRemote(o,n){const{host:s}=this;try{const{loadFactory:l=!0}=n||{loadFactory:!0},{module:p,moduleOptions:c,remoteMatchInfo:u}=await this.getRemoteModuleAndOptions({id:o}),{pkgNameOrAlias:E,remote:y,expose:R,id:T,remoteSnapshot:$}=u,N=await p.get(T,R,n,$),I=await this.hooks.lifecycle.onLoad.emit({id:T,pkgNameOrAlias:E,expose:R,exposeModule:l?N:void 0,exposeModuleFactory:l?void 0:N,remote:y,options:c,moduleInstance:p,origin:s});return this.setIdToRemoteMap(o,u),typeof I=="function"?I:N}catch(l){const{from:p="runtime"}=n||{from:"runtime"},c=await this.hooks.lifecycle.errorLoadRemote.emit({id:o,error:l,from:p,lifecycle:"onLoad",origin:s});if(!c)throw l;return c}}async preloadRemote(o){const{host:n}=this;await this.hooks.lifecycle.beforePreloadRemote.emit({preloadOps:o,options:n.options,origin:n});const s=Z(n.options.remotes,o);await Promise.all(s.map(async l=>{const{remote:p}=l,c=V(p),{globalSnapshot:u,remoteSnapshot:E}=await n.snapshotHandler.loadRemoteSnapshotInfo(p),y=await this.hooks.lifecycle.generatePreloadAssets.emit({origin:n,preloadOptions:l,remote:p,remoteInfo:c,globalSnapshot:u,remoteSnapshot:E});y&&te(c,n,y)}))}registerRemotes(o,n){const{host:s}=this;o.forEach(l=>{this.registerRemote(l,s.options.remotes,{force:n==null?void 0:n.force})})}async getRemoteModuleAndOptions(o){const{host:n}=this,{id:s}=o;let l;try{l=await this.hooks.lifecycle.beforeRequest.emit({id:s,options:n.options,origin:n})}catch(I){if(l=await this.hooks.lifecycle.errorLoadRemote.emit({id:s,options:n.options,origin:n,from:"runtime",error:I,lifecycle:"beforeRequest"}),!l)throw I}const{id:p}=l,c=d(n.options.remotes,p);t.assert(c,i.getShortErrorMsg(i.RUNTIME_004,i.runtimeDescMap,{hostName:n.options.name,requestId:p}));const{remote:u}=c,E=V(u),y=await n.sharedHandler.hooks.lifecycle.afterResolve.emit(r._extends({id:p},c,{options:n.options,origin:n,remoteInfo:E})),{remote:R,expose:T}=y;t.assert(R&&T,`The 'beforeRequest' hook was executed, but it failed to return the correct 'remote' and 'expose' values while loading ${p}.`);let $=n.moduleCache.get(R.name);const N={host:n,remoteInfo:E};return $||($=new A(N),n.moduleCache.set(R.name,$)),{module:$,moduleOptions:N,remoteMatchInfo:y}}registerRemote(o,n,s){const{host:l}=this,p=()=>{if(o.alias){const u=n.find(E=>{var y;return o.alias&&(E.name.startsWith(o.alias)||((y=E.alias)==null?void 0:y.startsWith(o.alias)))});t.assert(!u,`The alias ${o.alias} of remote ${o.name} is not allowed to be the prefix of ${u&&u.name} name or alias`)}"entry"in o&&a.isBrowserEnv()&&!o.entry.startsWith("http")&&(o.entry=new URL(o.entry,window.location.origin).href),o.shareScope||(o.shareScope=t.DEFAULT_SCOPE),o.type||(o.type=t.DEFAULT_REMOTE_TYPE)};this.hooks.lifecycle.beforeRegisterRemote.emit({remote:o,origin:l});const c=n.find(u=>u.name===o.name);if(!c)p(),n.push(o),this.hooks.lifecycle.registerRemote.emit({remote:o,origin:l});else{const u=[`The remote "${o.name}" is already registered.`,s!=null&&s.force?"Hope you have known that OVERRIDE it may have some unexpected errors":'If you want to merge the remote, you can set "force: true".'];s!=null&&s.force&&(this.removeRemote(c),p(),n.push(o),this.hooks.lifecycle.registerRemote.emit({remote:o,origin:l})),a.warn(u.join(" "))}}removeRemote(o){try{const{host:s}=this,{name:l}=o,p=s.options.remotes.findIndex(u=>u.name===l);p!==-1&&s.options.remotes.splice(p,1);const c=s.moduleCache.get(o.name);if(c){const u=c.remoteInfo,E=u.entryGlobalName;if(t.CurrentGlobal[E]){var n;(n=Object.getOwnPropertyDescriptor(t.CurrentGlobal,E))!=null&&n.configurable?delete t.CurrentGlobal[E]:t.CurrentGlobal[E]=void 0}const y=k(c.remoteInfo);t.globalLoading[y]&&delete t.globalLoading[y],s.snapshotHandler.manifestCache.delete(u.entry);let R=u.buildVersion?a.composeKeyWithSeparator(u.name,u.buildVersion):u.name;const T=t.CurrentGlobal.__FEDERATION__.__INSTANCES__.findIndex(N=>u.buildVersion?N.options.id===R:N.name===R);if(T!==-1){const N=t.CurrentGlobal.__FEDERATION__.__INSTANCES__[T];R=N.options.id||R;const I=t.getGlobalShareScope();let O=!0;const L=[];Object.keys(I).forEach(P=>{const G=I[P];G&&Object.keys(G).forEach(D=>{const F=G[D];F&&Object.keys(F).forEach(K=>{const W=F[K];W&&Object.keys(W).forEach(H=>{const w=W[H];w&&typeof w=="object"&&w.from===u.name&&(w.loaded||w.loading?(w.useIn=w.useIn.filter(q=>q!==u.name),w.useIn.length?O=!1:L.push([P,D,K,H])):L.push([P,D,K,H]))})})})}),O&&(N.shareScopeMap={},delete I[R]),L.forEach(([P,G,D,F])=>{var K,W,H;(H=I[P])==null||(W=H[G])==null||(K=W[D])==null||delete K[F]}),t.CurrentGlobal.__FEDERATION__.__INSTANCES__.splice(T,1)}const{hostGlobalSnapshot:$}=ne(o,s);if($){const N=$&&"remotesInfo"in $&&$.remotesInfo&&t.getInfoWithoutType($.remotesInfo,o.name).key;N&&(delete $.remotesInfo[N],t.Global.__FEDERATION__.__MANIFEST_LOADING__[N]&&delete t.Global.__FEDERATION__.__MANIFEST_LOADING__[N])}s.moduleCache.delete(o.name)}}catch(s){t.logger.log("removeRemote fail: ",s)}}constructor(o){this.hooks=new Y({beforeRegisterRemote:new X("beforeRegisterRemote"),registerRemote:new X("registerRemote"),beforeRequest:new M("beforeRequest"),onLoad:new U("onLoad"),handlePreloadModule:new B("handlePreloadModule"),errorLoadRemote:new U("errorLoadRemote"),beforePreloadRemote:new U("beforePreloadRemote"),generatePreloadAssets:new U("generatePreloadAssets"),afterPreloadRemote:new U,loadEntry:new U}),this.host=o,this.idToRemoteMap={}}}class Q{initOptions(o){this.registerPlugins(o.plugins);const n=this.formatOptions(this.options,o);return this.options=n,n}async loadShare(o,n){return this.sharedHandler.loadShare(o,n)}loadShareSync(o,n){return this.sharedHandler.loadShareSync(o,n)}initializeSharing(o=t.DEFAULT_SCOPE,n){return this.sharedHandler.initializeSharing(o,n)}initRawContainer(o,n,s){const l=V({name:o,entry:n}),p=new A({host:this,remoteInfo:l});return p.remoteEntryExports=s,this.moduleCache.set(o,p),p}async loadRemote(o,n){return this.remoteHandler.loadRemote(o,n)}async preloadRemote(o){return this.remoteHandler.preloadRemote(o)}initShareScopeMap(o,n,s={}){this.sharedHandler.initShareScopeMap(o,n,s)}formatOptions(o,n){const{shared:s}=t.formatShareConfigs(o,n),{userOptions:l,options:p}=this.hooks.lifecycle.beforeInit.emit({origin:this,userOptions:n,options:o,shareInfo:s}),c=this.remoteHandler.formatAndRegisterRemote(p,l),{shared:u}=this.sharedHandler.registerShared(p,l),E=[...p.plugins];l.plugins&&l.plugins.forEach(R=>{E.includes(R)||E.push(R)});const y=r._extends({},o,n,{plugins:E,remotes:c,shared:u});return this.hooks.lifecycle.init.emit({origin:this,options:y}),y}registerPlugins(o){const n=h(o,[this.hooks,this.remoteHandler.hooks,this.sharedHandler.hooks,this.snapshotHandler.hooks,this.loaderHook]);this.options.plugins=this.options.plugins.reduce((s,l)=>(l&&s&&!s.find(p=>p.name===l.name)&&s.push(l),s),n||[])}registerRemotes(o,n){return this.remoteHandler.registerRemotes(o,n)}constructor(o){this.hooks=new Y({beforeInit:new X("beforeInit"),init:new B,beforeInitContainer:new M("beforeInitContainer"),initContainer:new M("initContainer")}),this.version="0.7.3",this.moduleCache=new Map,this.loaderHook=new Y({getModuleInfo:new B,createScript:new B,createLink:new B,fetch:new U,getModuleFactory:new U});const n={id:t.getBuilderId(),name:o.name,plugins:[ae(),ce()],remotes:[],shared:{},inBrowser:a.isBrowserEnv()};this.name=o.name,this.options=n,this.snapshotHandler=new ue(this),this.sharedHandler=new me(this),this.remoteHandler=new pe(this),this.shareScopeMap=this.sharedHandler.shareScopeMap,this.registerPlugins([...n.plugins,...o.plugins||[]]),this.options=this.formatOptions(n,o)}}let x=null;function de(m){const o=t.getGlobalFederationInstance(m.name,m.version);if(o)return o.initOptions(m),x||(x=o),o;{const n=t.getGlobalFederationConstructor()||Q;return x=new n(m),t.setGlobalFederationInstance(x),x}}function fe(...m){return t.assert(x,"Please call init first"),x.loadRemote.apply(x,m)}function he(...m){return t.assert(x,"Please call init first"),x.loadShare.apply(x,m)}function _e(...m){return t.assert(x,"Please call init first"),x.loadShareSync.apply(x,m)}function ge(...m){return t.assert(x,"Please call init first"),x.preloadRemote.apply(x,m)}function Ee(...m){return t.assert(x,"Please call init first"),x.registerRemotes.apply(x,m)}function ye(...m){return t.assert(x,"Please call init first"),x.registerPlugins.apply(x,m)}function be(){return x}t.setGlobalFederationConstructor(Q),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),Object.defineProperty(e,"loadScriptNode",{enumerable:!0,get:function(){return a.loadScriptNode}}),e.registerGlobalPlugins=t.registerGlobalPlugins,e.FederationHost=Q,e.Module=A,e.getInstance=be,e.getRemoteEntry=C,e.getRemoteInfo=V,e.init=de,e.loadRemote=fe,e.loadShare=he,e.loadShareSync=_e,e.preloadRemote=ge,e.registerPlugins=ye,e.registerRemotes=Ee}(index_cjs$2);const usedShared={},usedRemotes=[];let initResolve,initReject;const initPromise=new Promise((e,r)=>{initResolve=e,initReject=r});var core__mf_v__runtimeInit__mf_v__={initPromise,initResolve,initReject};init=async function(e={}){const r=index_cjs$2.init({name:"core",remotes:usedRemotes,shared:usedShared,plugins:[],shareStrategy:"version-first"});r.initShareScopeMap("default",e);try{await Promise.all(await r.initializeSharing("default",{strategy:"version-first"}))}catch(a){console.error(a)}return core__mf_v__runtimeInit__mf_v__.initResolve(r),r},getExposes=function(e){if(!(e in exposesMap))throw new Error(`Module ${e} does not exist in container.`);return exposesMap[e]().then(r=>()=>r)}});export{__tla,getExposes as get,init};
